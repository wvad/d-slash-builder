"use strict";(()=>{const{MIN_SAFE_INTEGER:u,MAX_SAFE_INTEGER:c,EPSILON:h}=Number,{abs:v,trunc:m}=Math,e=JSON.stringify,{freeze:g,assign:y}=Object,b=document.createElement.bind(document),t=document.getElementById.bind(document),x=Function.prototype.call.bind(Element.prototype.append),w=(({call:e})=>{const n=e.bind(""[Symbol.iterator]),r=e.bind(n("").next);return t=>{t=n(t);for(let e=0;;e++)if(r(t).done)return e}})(Function.prototype),E=g([null,null,null,"String","Integer","Boolean","User","Channel","Role","Mentionable","Number","Attachment"].map((e,t)=>[e,t])),N=g({errorMessage:g({color:"#FFA700"}),commandOption:g({padding:"7px",paddingTop:"0px",border:"1px #222 solid",borderRadius:"5px",margin:"5px 0px",position:"relative"}),optionChoice:g({display:"felx",padding:"5px 7px",border:"1px #222 solid",borderRadius:"5px",margin:"5px 0px",position:"relative"}),checkbox:g({width:"24px",height:"24px",outline:"0",cursor:"pointer"}),checkboxDescription:g({marginLeft:".3em","user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none"})});var i,a,o,f,n,r,s=new WeakMap,l=class{constructor(){s.set(this,new Map)}on(e,t){const n=s.get(this),r=n.get(e);r?r.push(t):n.set(e,[t])}emit(e,...t){s.get(this).get(e)?.forEach(e=>e(...t))}},p=(g(l.prototype),new WeakMap);const C=class{constructor({title:e,parent:t}){if(new.target!==C)throw Error("new.target is invalid");const n={},r=(p.set(this,n),b("input")),i=(r.type="text",b("div"));x(t,i),t=b("h3"),i.append(t),t.textContent=e,i.append(n.input=r),i.append(n.errorMessage=b("div")),y(n.errorMessage.style,N.errorMessage)}get value(){return p.get(this).input.value}set value(e){p.get(this).input.value=e}on(...e){return p.get(this).input.addEventListener(...e)}showError(e){const t=p.get(this);t.input.style.borderColor="red",t.errorMessage.style.display="",t.errorMessage.textContent=e}hideError(){const e=p.get(this);e.input.style.borderColor="",e.errorMessage.style.display="none"}},O=(g(C.prototype),i=new WeakMap,class{constructor({title:e,options:t,parent:n}){if(new.target!==O)throw Error("new.target is invalid");const r=b("select");i.set(this,r),t.forEach(e=>{const t=b("option");[t.textContent,t.value]=e,r.append(t)}),r.style.cursor="pointer",t=b("div"),x(n,t),n=b("h3"),t.append(n),n.textContent=e,t.append(r)}get value(){return i.get(this).value}set value(e){i.get(this).value=e}on(...e){return i.get(this).addEventListener(...e)}}),k=(g(O.prototype),a=new WeakMap,class{constructor({title:e,description:t,parent:n}){if(new.target!==k)throw Error("new.target is invalid");var r=b("div");x(n,r),n=b("h3"),r.append(n),n.textContent=e,e=b("div"),r.append(e);const i=b("input");a.set(this,i),e.append(i),e.style.cursor="pointer",e.addEventListener("click",e=>{e.target!==i&&i.click()}),i.type="checkbox",y(i.style,N.checkbox),(r=b("span")).textContent=t,y(r.style,N.checkboxDescription),e.append(r)}get value(){return a.get(this).checked}set value(e){a.get(this).checked=e}on(...e){return a.get(this).addEventListener(...e)}}),d=(g(k.prototype),o=new WeakMap,class{constructor({parent:e}){if(new.target!==d)throw Error("new.target is invalid");const t={},n=(o.set(this,t),b("div"));var r=b("div"),i={flex:"1",padding:"2px"};Object.assign(r.style,i),n.append(r);const a=b("h3");a.textContent="Name",a.style.margin="2px 0px",r.append(a),r.append(t.name=b("input")),t.name.type="text",r=b("div"),Object.assign(r.style,i),n.append(r),(i=b("h3")).textContent="Value",i.style.margin="2px 0px",r.append(i),r.append(t.value=b("input")),t.value.type="text",Object.assign(n.style,N.optionChoice),x(e,n)}get name(){return o.get(this).name.value}set name(e){o.get(this).name.value=e}get value(){return o.get(this).value.value}set value(e){o.get(this).value.value=e}}),M=(g(d.prototype),f=new WeakMap,class extends l{constructor({parent:e}){function t(){s.value.length<1?s.showError("This is required"):32<s.value.length?s.showError("Too long"):/^[\w-]{1,32}$/.test(s.value)?s.hideError():s.showError("Only alphabet, number, hyphen and underbar")}function n(){var e=w(l.value);e<1?l.showError("This is required"):100<e?l.showError("Too long"):l.hideError()}function r(i){let a="";i.on("input",()=>{if(!i.value)return a=i.value,void this.emit("changed");var e=Number(o.value);if([4,10].includes(e)){var t=4===e;if(t?"-"===i.value:/^(-|\.|-\.)$/.test(i.value))return a=i.value,void this.emit("changed");var n=i.value.endsWith("."),e=i.value,r=Number(e);switch(Number.isNaN(r)?"INVALID":r<u?"SMALL":c<r?"BIG":t&&h<v(m(r)-r)||t&&!/^-?\d+$/.test(e)?"TRUNC":"OK"){case"INVALID":return void(i.value=a);case"SMALL":i.value=u;break;case"BIG":i.value=c;break;case"TRUNC":i.value=m(i.value),n&&!t&&(i.value+=".");break;case"OK":break;default:throw Error("Invalid case")}a=i.value,this.emit("changed")}else i.value=a})}if(new.target!==M)throw Error("new.target is invalid");super();const i={},a=(f.set(this,i),i.container=b("div")),{type:o,name:s,description:l,minValue:p,maxValue:d}=(x(e,a),y(a.style,N.commandOption),this.type=new O({title:"Type",options:E,parent:a}),this.name=new C({title:"Name",parent:a}),this.description=new C({title:"Description",parent:a}),this.required=new k({title:"Required",description:"This command option is required",parent:a}),a.append(i.autocomplete=b("div")),this.autocomplete=new O({title:"Auto complete or Choices",options:[["OFF","false"],["ON - Auto complete","true"]],parent:i.autocomplete}),a.append(i.numOpt=b("div")),i.numOpt.style.display="none",this.minValue=new C({title:"Min value (optional)",parent:i.numOpt}),this.maxValue=new C({title:"Max value (optional)",parent:i.numOpt}),i.choices={},i.channelTypes=b("input"),(e=b("div")).innerHTML="&times;",e.className="red-button",a.append(e),e.addEventListener("click",()=>this.emit("deletionRequested")),this);o.on("input",()=>{var e=Number(o.value);this.numberRangeDisabled=![4,10].includes(e),this.autocompleteDisabled=![3,4,10].includes(e),this.emit("changed")}),s.on("blur",t),s.on("input",()=>{t(),this.emit("changed")}),l.on("blur",n),l.on("input",()=>{n(),this.emit("changed")}),r(p),r(d),this.required.on("input",()=>{this.emit("changed")}),this.autocomplete.on("input",()=>{this.emit("changed")}),g(this)}get numberRangeDisabled(){return"none"===f.get(this).numOpt.style.display}set numberRangeDisabled(e){f.get(this).numOpt.style.display=e?"none":""}get autocompleteDisabled(){return"none"===f.get(this).autocomplete.style.display}set autocompleteDisabled(e){f.get(this).autocomplete.style.display=e?"none":""}deleteSelf(){const e=f.get(this).container;e.parentNode?.removeChild(e),f.delete(this)}toJSON(){var e=Number(this.type.value);const t=[4,10].includes(e);var n=[3,4,10].includes(e);return{type:e,name:this.name.value,description:this.description.value,required:this.required.value||void 0,min_value:(()=>{if(t&&this.minValue.value){var e=Number(this.minValue.value);if(!Number.isNaN(e))return e}})(),max_value:(()=>{if(t&&this.maxValue.value){var e=Number(this.maxValue.value);if(!Number.isNaN(e))return e}})(),autocomplete:n&&"true"===this.autocomplete.value||void 0}}}),L=(g(M.prototype),n=new WeakMap,class extends l{constructor({parent:e}){super();const r=[],t=(n.set(this,r),b("div")),i=b("div"),a=b("span");a.textContent="Add command option",a.className="add-option",t.append(i),t.append(a),x(e,t),a.addEventListener("click",()=>{const t=new M({parent:i}),n=t.required;r.push(t),n.on("input",()=>{var e=r.indexOf(t);~e&&(n.value?r.slice(0,e).forEach(e=>e.required.value=!0):r.slice(e+1).forEach(e=>e.required.value=!1)),this.emit("changed")}),t.on("deletionRequested",()=>{var e=r.indexOf(t);~e&&r.splice(e,1),t.deleteSelf(),r.length<10&&(a.style.display=""),this.emit("changed")}),t.on("changed",()=>this.emit("changed")),9<r.length&&(a.style.display="none"),this.emit("changed")})}at(e){return n.get(this).at(e)}get length(){return n.get(this).length}*[Symbol.iterator](){for(const e of n.get(this))yield e}toJSON(){const e=n.get(this);return e.length?e.map(e=>e?.toJSON?.()):void 0}}),T=(g(L.prototype),Object.defineProperty(L,Symbol.species,{value:Array}),t("name")),S=t("description"),q=(r=t("out"),()=>r.textContent=e({name:T.value,description:S.value,options:R})),A=(document.addEventListener("click",()=>{}),t("name-error")),I=(l=()=>(q(),T.value.length<1?(T.style.borderColor="red",A.style.display="",void(A.textContent="This is required")):32<T.value.length?(T.style.borderColor="red",A.style.display="",void(A.textContent="Too long")):/^[\w-]{1,32}$/.test(T.value)?(A.style.display="none",void(T.style.borderColor="")):(T.style.borderColor="red",A.style.display="",void(A.textContent="Only alphabet, number, hyphen and underbar"))),T.addEventListener("blur",l),T.addEventListener("input",l),t("description-error")),R=(l=()=>{var e=w(S.value);return q(),e<1?(S.style.borderColor="red",I.style.display="",void(I.textContent="This is required")):100<e?(S.style.borderColor="red",I.style.display="",void(I.textContent="Too long")):(I.style.display="none",void(S.style.borderColor=""))},S.addEventListener("blur",l),S.addEventListener("input",l),globalThis.commandJSONOptions=new L({parent:t("options")}));R.on("changed",q),q()})()